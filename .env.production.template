# Production Environment Configuration Template
# Copy this file to .env.production and fill in the values
# NEVER commit this file with actual credentials to version control

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=National Water Infrastructure Monitoring System
APP_VERSION=2.0.0
ENVIRONMENT=production
DEBUG=false

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Choose database mode: mysql or postgres
DATABASE_MODE=mysql

# MySQL Configuration (Railway)
DATABASE_URL_MYSQL=mysql+pymysql://root:nYiLHEQsRMUsmXTUowmrlvNSJcutDxYg@interchange.proxy.rlwy.net:20906/railway

# PostgreSQL Configuration (Railway) - with PostGIS support
DATABASE_URL_POSTGRES=postgresql://postgres:egnQHcmNTcNzmTUBfHcUxewgARJEzhBt@shinkansen.proxy.rlwy.net:29535/railway

# Enable PostGIS features (auto-enabled for PostgreSQL)
ENABLE_POSTGIS_FEATURES=false

# Database Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_ECHO=false

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://default:VatkHEDGSLJbgKZlgTiVamRJggKcFqOy@switchyard.proxy.rlwy.net:10457

# =============================================================================
# S3 STORAGE CONFIGURATION (Railway S3-compatible)
# =============================================================================
S3_ENDPOINT=https://t3.storageapi.dev
S3_REGION=auto
S3_BUCKET=recorded-wrap-krk8vsj4wzi
S3_ACCESS_KEY=tid_WKMBXeNExOmrEzIKww_gnbNlOuwwHhgggpTBpaEonVRDWVExNu
S3_SECRET_KEY=tsec_IIbuZ_nXbwG4Ij84tM_UNen4Cvd1cGzzKQ2kbSyosGpQkMIszQA8Hv2X010cd7EFpMkyz1
S3_ENABLED=true
S3_STORAGE_CLASS=STANDARD_IA
S3_BACKUP_PREFIX=backups/

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# CRITICAL: Generate a strong secret key for production
# Use: python -c "import secrets; print(secrets.token_urlsafe(48))"
SECRET_KEY=nYiLHEQsRMUsmXTUowmrlvNSJcutDxYg_VatkHEDGSLJbgKZlgTiVamRJggKcFqOy_PRODUCTION_KEY_2024

# JWT Configuration
ALGORITHM=HS256
JWT_ISSUER=national-water-monitoring
JWT_AUDIENCE=water-monitoring-clients
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# MQTT BROKER CONFIGURATION
# =============================================================================
MQTT_BROKER_HOST=localhost
MQTT_BROKER_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_TLS_ENABLED=false
MQTT_TLS_CA_CERT=
MQTT_TLS_CLIENT_CERT=
MQTT_TLS_CLIENT_KEY=

# =============================================================================
# TCP INGESTION SERVER
# =============================================================================
TCP_HOST=0.0.0.0
TCP_PORT=9999

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WS_MESSAGE_QUEUE_SIZE=1000
WS_EVENT_REPLAY_LIMIT=500

# =============================================================================
# CELERY BACKGROUND JOBS
# =============================================================================
CELERY_BROKER_URL=redis://default:VatkHEDGSLJbgKZlgTiVamRJggKcFqOy@switchyard.proxy.rlwy.net:10457
CELERY_RESULT_BACKEND=redis://default:VatkHEDGSLJbgKZlgTiVamRJggKcFqOy@switchyard.proxy.rlwy.net:10457

# =============================================================================
# RATE LIMITING & THROTTLING
# =============================================================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_USER=100
RATE_LIMIT_PER_API_KEY=1000

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# IMPORTANT: Restrict CORS origins in production
# Format: comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,https://randwater.app,https://control.randwater.app
ALLOW_ORIGINS_REGEX=

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_RETENTION_HOURS=24

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true

# =============================================================================
# SECURITY HARDENING
# =============================================================================
# HTTPS Enforcement (disable if behind proxy like Railway)
ENFORCE_HTTPS=false

# Security Headers
SECURE_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true

# =============================================================================
# PRODUCTION DEPLOYMENT NOTES
# =============================================================================
# 1. Generate a new SECRET_KEY for production
# 2. Restrict CORS_ORIGINS to your actual domains
# 3. Enable ENFORCE_HTTPS if not behind a proxy
# 4. Configure MQTT with TLS certificates
# 5. Set up proper backup retention
# 6. Configure monitoring alerts
# 7. Review and adjust rate limits based on load
# 8. Enable database connection pooling
# 9. Set up log aggregation
# 10. Configure disaster recovery procedures
